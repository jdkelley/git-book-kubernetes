<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.80.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="All nodes pre-requisites #  Network configuration #  # Network setup vi /etc/netplan/50-cloud-init.yaml netplan apply DNS resolver #  This step enable the use of systemd-resolved in Ubuntu based distribution OS:
# Local DNS resolver for local fqdn echo &#34;192.168.2.4 k3s-mstr k3s-mstr.vlab..lcl&#34; >> /etc/hosts sudo service systemd-resolved stop sudo rm -f /etc/resolv.conf sudo ln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf sudo service systemd-resolved start Software pre-requisites #  # Upgrade packages sudo apt update sudo apt upgrade -y # Install software pre-requisites sudo apt-get install python3-pip gcc nfs-common -y (optionnal) proxy configuration #  Use the following commands if you need to use a corporate HTTP proxy server to reach Internet based resources:"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="All nodes pre-requisites"><meta property="og:description" content="All nodes pre-requisites #  Network configuration #  # Network setup vi /etc/netplan/50-cloud-init.yaml netplan apply DNS resolver #  This step enable the use of systemd-resolved in Ubuntu based distribution OS:
# Local DNS resolver for local fqdn echo &#34;192.168.2.4 k3s-mstr k3s-mstr.vlab..lcl&#34; >> /etc/hosts sudo service systemd-resolved stop sudo rm -f /etc/resolv.conf sudo ln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf sudo service systemd-resolved start Software pre-requisites #  # Upgrade packages sudo apt update sudo apt upgrade -y # Install software pre-requisites sudo apt-get install python3-pip gcc nfs-common -y (optionnal) proxy configuration #  Use the following commands if you need to use a corporate HTTP proxy server to reach Internet based resources:"><meta property="og:type" content="article"><meta property="og:url" content="https://k8s-book.vupti.me/k3s-cluster-deployment/all-nodes-pre-requisites/"><meta property="article:modified_time" content="2021-01-14T15:54:14+00:00"><title>All nodes pre-requisites | My Kubernetes Book</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.0f40b4e83b0db00d11c595295e7f5f85f51436d20a5b6790534cb30c9f46a201.css integrity="sha256-D0C06DsNsA0RxZUpXn9fhfUUNtIKW2eQU0yzDJ9GogE="><script defer src=/en.search.min.4c840d5983bb995a5a6f58743c02c86166efc525ebd2d66de80acf2beb919c60.js integrity="sha256-TIQNWYO7mVpab1h0PALIYWbvxSXr0tZt6ArPK+uRnGA="></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><img src=/images/kubernetes_logo.svg alt=Logo><span>My Kubernetes Book</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://k8s-book.vupti.me/k3s-cluster-deployment/>Deploy a k3S cluster</a><ul><li><a href=https://k8s-book.vupti.me/k3s-cluster-deployment/all-nodes-pre-requisites/ class=active>All nodes pre-requisites</a></li><li><a href=https://k8s-book.vupti.me/k3s-cluster-deployment/initial-master-node/>Initial master node</a></li><li><a href=https://k8s-book.vupti.me/k3s-cluster-deployment/worker-node-s/>Worker node(s)</a></li></ul></li><li><a href=https://k8s-book.vupti.me/setup-a-powerful-kubernetes-client/>Setup a powerful Kubernetes client</a><ul><li><a href=https://k8s-book.vupti.me/setup-a-powerful-kubernetes-client/k9s/>k9s</a></li><li><a href=https://k8s-book.vupti.me/setup-a-powerful-kubernetes-client/kubens-and-kubectx/>kubens & kubectx</a></li><li><a href=https://k8s-book.vupti.me/setup-a-powerful-kubernetes-client/octant/>Octant</a></li><li><a href=https://k8s-book.vupti.me/setup-a-powerful-kubernetes-client/argo-cli/>Argo cli</a></li><li><a href=https://k8s-book.vupti.me/setup-a-powerful-kubernetes-client/openfaas-cli/>OpenFaaS CLI</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>All nodes pre-requisites</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#network-configuration>Network configuration</a></li><li><a href=#dns-resolver>DNS resolver</a></li><li><a href=#software-pre-requisites>Software pre-requisites</a></li><li><a href=#_optionnal_-proxy-configuration>(<em>optionnal</em>) proxy configuration</a></li></ul></nav></aside></header><article class=markdown><h1 id=all-nodes-pre-requisites>All nodes pre-requisites
<a class=anchor href=#all-nodes-pre-requisites>#</a></h1><h2 id=network-configuration>Network configuration
<a class=anchor href=#network-configuration>#</a></h2><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Network setup</span>
vi /etc/netplan/50-cloud-init.yaml
netplan apply
</code></pre></div><h2 id=dns-resolver>DNS resolver
<a class=anchor href=#dns-resolver>#</a></h2><p>This step enable the use of <code>systemd-resolved</code> in Ubuntu based distribution OS:</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Local DNS resolver for local fqdn</span>
<span style=color:#111>echo</span> <span style=color:#d88200>&#34;192.168.2.4 k3s-mstr k3s-mstr.vlab..lcl&#34;</span> &gt;&gt; /etc/hosts
sudo service systemd-resolved stop
sudo rm -f /etc/resolv.conf
sudo ln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf
sudo service systemd-resolved start
</code></pre></div><h2 id=software-pre-requisites>Software pre-requisites
<a class=anchor href=#software-pre-requisites>#</a></h2><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Upgrade packages</span>
sudo apt update
sudo apt upgrade -y

<span style=color:#75715e># Install software pre-requisites</span>
sudo apt-get install python3-pip gcc nfs-common -y
</code></pre></div><h2 id=_optionnal_-proxy-configuration>(<em>optionnal</em>) proxy configuration
<a class=anchor href=#_optionnal_-proxy-configuration>#</a></h2><p>Use the following commands if you need to use a corporate HTTP proxy server to reach Internet based resources:</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Proxy setup</span>
<span style=color:#111>echo</span> <span style=color:#d88200>&#34;HTTP_PROXY=X.X.X.X:8080
</span><span style=color:#d88200>HTTPS_PROXY=X.X.X.X:8080
</span><span style=color:#d88200>NO_PROXY=.vlab.lcl,192.168.0.0/16,127.0.0.1,localhost&#34;</span> &gt;&gt; /etc/environment
<span style=color:#111>export</span> <span style=color:#111>HTTP_PROXY</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;X.X.X.X:8080&#34;</span>
<span style=color:#111>export</span> <span style=color:#111>HTTPS_PROXY</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;X.X.X.X:8080&#34;</span>
<span style=color:#111>export</span> <span style=color:#111>NO_PROXY</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;.vlab.lcl,192.168.0.0/16,127.0.0.1,localhost&#34;</span>
<span style=color:#111>echo</span> <span style=color:#d88200>&#34;Acquire::http::proxy \&#34;http://X.X.X.X:8080\&#34;;&#34;</span> &gt;&gt; /etc/apt/apt.conf

<span style=color:#75715e># Test</span>
curl https://google.com
</code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/lrivallain/git-book-kubernetes/commit/c3f448df95771261c2c9b1177efc34735033b333 title="Last modified by Ludovic RIVALLAIN | Jan 1, 14141" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Jan 1, 14141</span></a></div><div><a class="flex align-center" href=https://github.com/lrivallain/git-book-kubernetes/edit/master//k3s-cluster-deployment/all-nodes-pre-requisites.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#network-configuration>Network configuration</a></li><li><a href=#dns-resolver>DNS resolver</a></li><li><a href=#software-pre-requisites>Software pre-requisites</a></li><li><a href=#_optionnal_-proxy-configuration>(<em>optionnal</em>) proxy configuration</a></li></ul></nav></aside></main></body></html>